{"version":3,"file":"small-grid-table.js","sources":["../../../projects/small-grid-table/src/lib/util.ts","../../../projects/small-grid-table/src/lib/small-grid-table.component.html","../../../projects/small-grid-table/src/lib/small-grid-table.component.ts","../../../projects/small-grid-table/src/lib/small-grid-table.module.ts","../../../projects/small-grid-table/src/public-api.ts","../../../projects/small-grid-table/src/small-grid-table.ts"],"sourcesContent":["export function mat_to_list(m: any) {\n  return m.flat();\n}\n\nexport function set_rc(dtb) {\n  dtb.forEach((row, r) => {\n    row.forEach((cell, c) => {\n      cell._r = r;\n      cell._c = c;\n    });\n  });\n}\n\nexport function fmt_cell_ui(flat) {\n  flat.forEach(cell => {\n      if(cell.ui === undefined) {\n        cell.ui=\"\"\n      }\n  });\n}\n\n\nexport function set_dflt(flat) {\n  flat.forEach(cell => {\n    let cond = cell._c % 2 === 1;\n    if (cond && (cell.ui === \"\")) {\n      cell.ui = \"background-color:#F8F8F8;color:#333333;font-size:18px;font-weight:400;font-family:PingFang SC;\";\n    }\n  });\n}\n\nexport function set_ui(flat,ui_func) {\n  flat.forEach(cell => {\n      ui_func(cell)\n  });\n}\n\nexport function calc_and_set(instance) {\n  set_rc(instance.dtb);\n  instance.rownum = instance.dtb.length;\n  instance.colnum = instance.dtb[0].length;\n  if (instance.ratio === undefined) {\n    let cell_width = parseInt(instance.width) / instance.rownum;\n    let cell_height = parseInt(instance.height) / instance.colnum;\n    instance.ratio = cell_width.toString() + \":\" + cell_height.toString();\n  } else {\n  }\n  if (instance.gutter === undefined) {\n    instance.gutter = \"0\";\n  } else {\n  }\n  ////\n  if (instance.dflt === undefined) {\n    instance.dflt = true;\n  } else {\n  }\n  if (instance.ui_func === undefined) {\n    instance.ui_func = (cell)=>{};\n  } else {\n  }  \n  ////\n  instance.flat = mat_to_list(instance.dtb);\n  fmt_cell_ui(instance.flat);\n  if (instance.dflt) {set_dflt(instance.flat);}\n  set_ui(instance.flat,instance.ui_func);\n}\n\n","<mat-card\n    [style.width.px]=\"width\"\n>\n    <mat-grid-list \n        [cols]=\"colnum\" \n        [rowHeight]=\"ratio\" \n        [gutterSize]=\"gutter\"\n    >\n    \t<mat-grid-tile *ngFor=\"let cell of flat\" [style]=\"cell.ui\">\n          <ng-container\n            [ngTemplateOutlet]=\"slotRef\"\n            [ngTemplateOutletContext]=\"{$implicit:cell}\"\n          >\n          </ng-container>\n    \t</mat-grid-tile>\n    </mat-grid-list>\n</mat-card>\n","import {\n  Component,\n  OnInit,\n  Input,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  ViewChild,\n  ContentChild,\n  TemplateRef,\n  AfterContentInit\n} from \"@angular/core\";\n\nimport { calc_and_set } from \"./util\";\n\nexport interface Tile {\n  data: any;\n  ui?: any;\n  _c?: number;\n  _r?: number;\n}\n\ntype Dtb = Array<Array<Tile>>;\ntype FlatDtb = Array<Tile>;\n\n@Component({\n  selector: \"nv-small-grid-table\",\n  templateUrl: \"./small-grid-table.component.html\"\n})\nexport class SmallGridTableComponent implements OnInit {\n  @Input() dtb: Dtb;\n  public flat: FlatDtb;\n  public rownum: number;\n  public colnum: number;\n  @Input() width: string;\n  @Input() ratio: string;\n  @Input() height: string;\n  @Input() gutter: string;\n  @Input() dflt: boolean;\n  @Input() ui_func: (cell: any) => void;\n  @ContentChild(\"smallGridTableSlot\", { static: false }) slotRef: TemplateRef<\n    any\n  >;\n  constructor(private cdref: ChangeDetectorRef) {}\n\n  ngOnInit() {\n    calc_and_set(this);\n  }\n}\n\n","import { NgModule,ModuleWithProviders } from '@angular/core';\nimport {\n    CommonModule\n} from '@angular/common';\n\n\n\n\nimport { SmallGridTableComponent } from './small-grid-table.component';\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatGridListModule } from \"@angular/material/grid-list\";\n\n\n\n@NgModule({\n    declarations: [SmallGridTableComponent],\n    imports: [\n        CommonModule,\n        MatCardModule,\n        MatGridListModule\n    ],\n    exports: [SmallGridTableComponent]\n})\nexport class SmallGridTableModule { \n  public static forRoot(): ModuleWithProviders<SmallGridTableModule> {\n    return {\n      ngModule: SmallGridTableModule,\n      providers: [],\n    }\n  }\n\n  public static forChild(): ModuleWithProviders<SmallGridTableModule> {\n    return {\n      ngModule: SmallGridTableModule,\n      providers: [],\n    }\n  }\n\n}\n","/*\n * Public API Surface of small-grid-table\n */\n\nexport * from './lib/small-grid-table.component';\nexport * from './lib/small-grid-table.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵelementContainer","i0.ɵɵelementEnd","i0.ɵɵstyleMap","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵtemplate","i0.ɵɵstyleProp"],"mappings":"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"}