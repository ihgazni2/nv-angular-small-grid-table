{"version":3,"file":"small-grid-table.umd.js","sources":["../../../projects/small-grid-table/src/lib/util.ts","../../../projects/small-grid-table/src/lib/small-grid-table.component.html","../../../projects/small-grid-table/src/lib/small-grid-table.component.ts","../../../projects/small-grid-table/src/lib/small-grid-table.module.ts","../../../projects/small-grid-table/src/public-api.ts","../../../projects/small-grid-table/src/small-grid-table.ts"],"sourcesContent":["export function mat_to_list(m: any) {\n  return m.flat();\n}\n\nexport function set_rc(dtb) {\n  dtb.forEach((row, r) => {\n    row.forEach((cell, c) => {\n      cell._r = r;\n      cell._c = c;\n    });\n  });\n}\n\nexport function fmt_cell_ui(flat) {\n  flat.forEach(cell => {\n      if(cell.ui === undefined) {\n        cell.ui=\"\"\n      }\n  });\n}\n\n\nexport function set_dflt(flat) {\n  flat.forEach(cell => {\n    let cond = cell._c % 2 === 1;\n    if (cond && (cell.ui === \"\")) {\n      cell.ui = \"background-color:#F8F8F8;color:#333333;font-size:18px;font-weight:400;font-family:PingFang SC;\";\n    }\n  });\n}\n\nexport function set_ui(flat,ui_func) {\n  flat.forEach(cell => {\n      ui_func(cell)\n  });\n}\n\nexport function calc_and_set(instance) {\n  set_rc(instance.dtb);\n  instance.rownum = instance.dtb.length;\n  instance.colnum = instance.dtb[0].length;\n  if (instance.ratio === undefined) {\n    let cell_width = parseInt(instance.width) / instance.rownum;\n    let cell_height = parseInt(instance.height) / instance.colnum;\n    instance.ratio = cell_width.toString() + \":\" + cell_height.toString();\n  } else {\n  }\n  if (instance.gutter === undefined) {\n    instance.gutter = \"0\";\n  } else {\n  }\n  ////\n  if (instance.dflt === undefined) {\n    instance.dflt = true;\n  } else {\n  }\n  if (instance.ui_func === undefined) {\n    instance.ui_func = (cell)=>{};\n  } else {\n  }  \n  ////\n  instance.flat = mat_to_list(instance.dtb);\n  fmt_cell_ui(instance.flat);\n  if (instance.dflt) {set_dflt(instance.flat);}\n  set_ui(instance.flat,instance.ui_func);\n}\n\n","<mat-card\n    [style.width.px]=\"width\"\n>\n    <mat-grid-list \n        [cols]=\"colnum\" \n        [rowHeight]=\"ratio\" \n        [gutterSize]=\"gutter\"\n    >\n    \t<mat-grid-tile *ngFor=\"let cell of flat\" [style]=\"cell.ui\">\n          <ng-container\n            [ngTemplateOutlet]=\"slotRef\"\n            [ngTemplateOutletContext]=\"{$implicit:cell}\"\n          >\n          </ng-container>\n    \t</mat-grid-tile>\n    </mat-grid-list>\n</mat-card>\n","import {\n  Component,\n  OnInit,\n  Input,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  ViewChild,\n  ContentChild,\n  TemplateRef,\n  AfterContentInit\n} from \"@angular/core\";\n\nimport { calc_and_set } from \"./util\";\n\nexport interface Tile {\n  data: any;\n  ui?: any;\n  _c?: number;\n  _r?: number;\n}\n\ntype Dtb = Array<Array<Tile>>;\ntype FlatDtb = Array<Tile>;\n\n@Component({\n  selector: \"nv-small-grid-table\",\n  templateUrl: \"./small-grid-table.component.html\"\n})\nexport class SmallGridTableComponent implements OnInit {\n  @Input() dtb: Dtb;\n  public flat: FlatDtb;\n  public rownum: number;\n  public colnum: number;\n  @Input() width: string;\n  @Input() ratio: string;\n  @Input() height: string;\n  @Input() gutter: string;\n  @Input() dflt: boolean;\n  @Input() ui_func: (cell: any) => void;\n  @ContentChild(\"smallGridTableSlot\", { static: false }) slotRef: TemplateRef<\n    any\n  >;\n  constructor(private cdref: ChangeDetectorRef) {}\n\n  ngOnInit() {\n    calc_and_set(this);\n  }\n}\n\n","import { NgModule,ModuleWithProviders } from '@angular/core';\nimport {\n    CommonModule\n} from '@angular/common';\n\n\n\n\nimport { SmallGridTableComponent } from './small-grid-table.component';\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatGridListModule } from \"@angular/material/grid-list\";\n\n\n\n@NgModule({\n    declarations: [SmallGridTableComponent],\n    imports: [\n        CommonModule,\n        MatCardModule,\n        MatGridListModule\n    ],\n    exports: [SmallGridTableComponent]\n})\nexport class SmallGridTableModule { \n  public static forRoot(): ModuleWithProviders<SmallGridTableModule> {\n    return {\n      ngModule: SmallGridTableModule,\n      providers: [],\n    }\n  }\n\n  public static forChild(): ModuleWithProviders<SmallGridTableModule> {\n    return {\n      ngModule: SmallGridTableModule,\n      providers: [],\n    }\n  }\n\n}\n","/*\n * Public API Surface of small-grid-table\n */\n\nexport * from './lib/small-grid-table.component';\nexport * from './lib/small-grid-table.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵelementContainer","i0.ɵɵelementEnd","i0.ɵɵstyleMap","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵtemplate","i0.ɵɵstyleProp","Component","Input","ContentChild","CommonModule","MatCardModule","MatGridListModule","NgModule"],"mappings":"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"}